# ts-vk-bot

### Описание проекта

> Бот создан на основе библиотеки node-vk-bot-api (https://www.npmjs.com/package/node-vk-bot-api), а так же для интеграции NLP библиотека node-nlp (https://github.com/axa-group/nlp.js), работа с базой данных через TypeORM.

В рамках базового функционала реализовано:

1. Возможность создания сцен для пользователей и их контекстной обработки.
2. Возможность использования сессий для пользователей.
3. Возможность пересылки сообщения пользователя с сообщением от бота (forwarding).
4. Возможность разбиения сообщения на несколько сообщений (если длина превышает максимально допустимую).
5. Возможность отправки сообщения через объект бота сразу нескольким получателям.

Полезный функционал бота:

1. Возможность общения с ботом, благодаря NLP (умеет складывать простые два числа, умножать их; умеет переводить, загружая курс валют, из долларов в рубли и наоборот; может поддержать простое общение).
2. Возможность проверки доступность ресурса (осуществляется запрос к веб ресурсу, возвращается статус в виде кода и текста, а так же время от отправки до получения ответа).

### Подготовка к запуску

1. Необходимо создать в настройках сообщества или группы VK ключ доступа, с разрешением на доступ к сообщениям группы (так же сообщения предварительно должны быть активированы), сохранить данный ключ.

2. Необходимо активировать поддержку API в разделе Long Poll API версия **5.131**.

3. Необходимо скопировать файл `./.env.example` в `./.env.production`, вставив ключ доступа в строку `API_TOKEN=ключ`.

> Необходима предварительная установка docker с docker-compose для запуска приложения.

### Запуск

Установка всех необходимых библиотек:

```bash
$ npm ci
```

Запуск приложения:

```bash
$ sh ./start.sh
```